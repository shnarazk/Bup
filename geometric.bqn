âŸ¨
  dir5, dir9
  Ext,Shift,Gather5,Gather9
  version
âŸ© â‡

dir5 â† âŸ¨0â€¿0,1â€¿0,Â¯1â€¿0,0â€¿1,0â€¿Â¯1âŸ©
dir9 â† Â¯1+â¥Šâ†•3â€¿3

# Extend a 2D matrix with 1-width borders which are âˆ
#    geo â† â€¢Import "geometric.bqn"
# {dir5â€¿dir9â€¿extâ€¿shiftâ€¿gather5â€¿gather9â€¿versionâ‡}
#    geo.Ext â†•3â€¿3
# â”Œâ”€
# â•µ âˆ âˆ       âˆ       âˆ       âˆ
#   âˆ âŸ¨ 0 0 âŸ© âŸ¨ 0 1 âŸ© âŸ¨ 0 2 âŸ© âˆ
#   âˆ âŸ¨ 1 0 âŸ© âŸ¨ 1 1 âŸ© âŸ¨ 1 2 âŸ© âˆ
#   âˆ âŸ¨ 2 0 âŸ© âŸ¨ 2 1 âŸ© âŸ¨ 2 2 âŸ© âˆ
#   âˆ âˆ       âˆ       âˆ       âˆ
#                               â”˜
#    geo.Extâ¼ geo.Ext â†•3â€¿3
# â”Œâ”€
# â•µ âŸ¨ 0 0 âŸ© âŸ¨ 0 1 âŸ© âŸ¨ 0 2 âŸ©
#   âŸ¨ 1 0 âŸ© âŸ¨ 1 1 âŸ© âŸ¨ 1 2 âŸ©
#   âŸ¨ 2 0 âŸ© âŸ¨ 2 1 âŸ© âŸ¨ 2 2 âŸ©
#                           â”˜
Ext â† {ğ•Š x : (1âŠ¸âŒ½âˆâŠ¸Â»âŸ2)â‰1{ğ”½ _ğ•£ ğ•© : ğ”½âŒ¾â‰ğ”½ ğ•©}(2+â‰¢)âŠ¸â†‘x ; ğ•Šâ¼ğ•© : (Â¯2+â‰¢)âŠ¸â†‘1âŒ½â‰1 1âŒ½ğ•©}

# Left(positive)/Right(negative) Shift a list contents a step, filling with âˆ
# {dir5â€¿dir9â€¿extâ€¿shiftâ€¿gather5â€¿gather9â€¿versionâ‡}
#    Â¯1 geo.Shift â†•10
# âŸ¨ 1 2 3 4 5 6 7 8 9 âˆ âŸ©
#    1 geo.Shift â†•10
# âŸ¨ âˆ 0 1 2 3 4 5 6 7 8 âŸ©
#    0 geo.Shift â†•10
# âŸ¨ 0 1 2 3 4 5 6 7 8 9 âŸ©
Shift â† (1+Ã—âˆ˜âŠ£)â—¶âŸ¨âˆâŠ¸Â«,âŠ¢,âˆâŠ¸Â»âŸ©

# Gather self and four neighbars as a list
#    geo â† â€¢Import "geometric.bqn"
# {dir5â€¿dir9â€¿extâ€¿shiftâ€¿gather5â€¿gather9â€¿versionâ‡}
#    m â† 3â€¿3â¥Šâ†•9
# â”Œâ”€
# â•µ 0 1 2
#   3 4 5
#   6 7 8
#         â”˜
#    geo.Gather5 m
# â”Œâ”€
# â•µ âŸ¨ 0 âˆ 3 âˆ 1 âŸ© âŸ¨ 1 âˆ 4 0 2 âŸ© âŸ¨ 2 âˆ 5 1 âˆ âŸ©
#   âŸ¨ 3 0 6 âˆ 4 âŸ© âŸ¨ 4 1 7 3 5 âŸ© âŸ¨ 5 2 8 4 âˆ âŸ©
#   âŸ¨ 6 3 âˆ âˆ 7 âŸ© âŸ¨ 7 4 âˆ 6 8 âŸ© âŸ¨ 8 5 âˆ 7 âˆ âŸ©
#                                             â”˜
Gather5 â† {âˆ¾Â¨Â´dir5 Shift{yâ€¿x ğ”½ _ğ•£ ğ•© : yâŠ¸ğ”½â‰1âŒ¾â‰xâŠ¸ğ”½â‰1 ğ•©}Â¨<ğ•©}âŒ¾Ext

# Gather self and eight neighbars as a list
Gather9 â† {âˆ¾Â¨Â´dir9 Shift{yâ€¿x ğ”½ _ğ•£ ğ•© : yâŠ¸ğ”½â‰1âŒ¾â‰xâŠ¸ğ”½â‰1 ğ•©}Â¨<ğ•©}âŒ¾Ext

version â‡ "0.1,0"